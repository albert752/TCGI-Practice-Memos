# Practice 9 Memo of TCGI
## 0.5 MAC multicast addresses
After running on the server `ping -c1 224.0.0.1` we capture the traffic on
SimNet3. The results where the following:

1. We can only see one ICMP packet on the net. It is a echo ping request.
2. The TTL of this packet is 1 so it won't leave SimNet3.
3. The source and destination @IP in the IP header are:
	* src: 172.16.1.3
	* dst: 224.0.0.1
4. For the ethernet header:
	* src: Ethernet II, fe:fd:00:00:03:01
	* dst: IPv4mcast_01, 01:00:5e:00:00:01
5. We can see the direct mapping of the @IP on the @MAC. 
	* The first byte indicates multicast
	* The second and third are fixed and belog also to multicast
	* The fourth one begins with a 0 and if we add the 7 lsb of the seconf byte
		of the IP results to all 0.
	* From the fifth to the seventh, they match the IP fields.

Now we are going to also listen on SimNet3 but ping to 232.0.0.1. These are the
results:

1. The @MAC of the frame are:
	* Src: fe:fd:00:00:03:01 (fe:fd:00:00:03:01)
	* Dst: IPv4mcast_01 (01:00:5e:00:00:01)
2. We can see that the destination @MAC is the same as before althow the @IP is
   	different. 
3. The sustem will resolve this ambiguity at the IP layer where it
   	will retrieve the full @IP.

After setting up the server to not ignore broadcast and multicas ICMP packate
we run the same test as in the fisrt exercice but now with `-c3`. These are the
results:

1. The pings are now fully working. But there is no reply messages on SimNet3.
   I supose that the server is answering itself the requests.
2. As mentioned before, no reply messages where seen.

Now we disable the same flag on R2 and re-run the ping:
1. Both the server and R2 are answering the ping.
2. Now we can see reply messages on SimNet3 generated by R2
3. Those messages are sent in  aunicast way. ARP gets triggered and also the
   @IP are the unicast ones
* Also mention that the ping app reprts duplicated packages.

## 0.6 Multicast transmission in a subnet
### 0.6.1 Multicast configuration
In order to retrieve information about the joined groups by the host, we can
explore the file `/proc/net/igmp`:
```
Idx     Device    : Count Querier       Group    Users Timer    Reporter
1       lo        :     1      V3
                                010000E0     1 0:00000000               0
5       eth1      :     1      V3
                                010000E0     1 0:00000000               0
```

If we reverse the @IP in hex `010000E0` and turn it into bynary, we'll see
224.0.0.1. The `netstat -gn`  command can also be used.

* `/proc/net/ip_mr_vif`: this file contains the interfaces that are involved in multicast operations in the multicast router, and some statistics of usage

* `/proc/net/ip_mr_cache`: this file shows the contents of the Multicast Forwarding Cache.

### 0.6.3 udp-sender
To set up the video server, we execute on the server machine:
```udp-sender --file=./big_664.mpg --min-clients 1 --portbase 22345 
--nopointopoint --interface eth1 --ttl 1 --mcast-addr 232.43.211.234 
--mcast-all-addr 225.1.2.3```

* `--file`: The realive path to the file.
* `--min-clients`: Automatically start as soon as a minimal number of clients have
           connected.
* `--portbase`: The app port
*  `--nopointopoint`: Don't use point-to-point, even if there is only one single
           receiver.
The other parameters are self explanatory.

